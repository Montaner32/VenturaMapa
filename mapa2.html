<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Web</title>

    <!-- Libreria de Leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

    <!-- PROBLEMAS DE SEGURIDAD-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>

    <!--Biblioteca de Leaflet-->
    <link rel="stylesheet" href="libs/CSS/leaflet.css">
    <script src="libs/JS/leaflet.js"></script>

    <!-- Dibujo-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw-src.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>

	<!-- Menú Diapositiva -->
	<link rel="stylesheet" href="libs/CSS/SlideMenu.css" />
	<script src="libs/JS/SlideMenu.js"></script>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- GeoCoder-->
	<link rel="stylesheet" href="libs/CSS/Control.OSMGeocoder.css" />
	<script src="libs/JS/Control.OSMGeocoder.js"></script>

	<!-- Visor-->
	<link rel="stylesheet" href="libs/src/Control.MiniMap.css" />
	<script src="libs/src/Control.MiniMap.js"></script>

	<!-- Localizadorn-->
	<link rel="stylesheet" href="libs/CSS/L.Control.Locate.min.css" />
	<script src="libs/js/L.Control.Locate.js"></script>

	<!-- Posición de Maouse-->
	<link rel="stylesheet" href="libs/css/L.Control.MousePosition.css" />
	<script src="libs/js/L.Control.MousePosition.js"></script>

	<!-- Barra de Navegación-->
	<link rel="stylesheet" href="libs/css/NavBar.css" />
	<script src="libs/js/NavBar.js"></script>

	<!-- Fuente-->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- jquery-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    
    <!-- Leaflet Plugins -->
	<link rel="stylesheet" href="libs/src/Control.MiniMap.css"/>
	<script src="libs/src/Control.MiniMap.js" type="text/javascript"></script>

   
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html,
        body,
        #map {
            height: 100%;
            width: 100%;
        }
    </style>

</head>

<body>
    <div id="map"> </div>
    <script type="text/javascript">

        var map = new L.Map('map');
		var OpenStreetMapUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		var OpenStreetMapAttrib='Map data &copy; OpenStreetMap contributors';
		
		var cartoUrl='http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}';
		var cartoAttrib='Map data &copy; OpenStreetMap contributors';
	
		var baseLayers = {
           OpenStreetMap:  L.tileLayer(OpenStreetMapUrl, {minZoom: 5, maxZoom: 18, attribution: OpenStreetMapAttrib}),
           World_Imagery: L.tileLayer(cartoUrl, {minZoom: 5, maxZoom: 18, attribution: cartoAttrib})
       };
        var baseLayersCopy = {
           OpenStreetMap:  L.tileLayer(OpenStreetMapUrl, {minZoom: 0, maxZoom: 13, attribution: OpenStreetMapAttrib}),
           World_Imagery: L.tileLayer(cartoUrl, {minZoom: 0, maxZoom: 13, attribution: cartoAttrib})
       };	   
	
        

         ///// Insertar Capas desde Geoserver (format WMS)
        Project1_wms = 'http://localhost:8080/geoserver/Project1/wms';

        var mao = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:mao',
            format: 'image/png',
            transparent: true,
            version: '1.1.0',
            attribution: "IVAN VENTURA"
        });

        var bancas = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas',
            format: 'image/png',
            transparent: true,
            version: '1.1.0',
            attribution: "IVAN VENTURA"
        });

        var escuelas = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:Escuelas',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var bancas100m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas100m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var bancas200m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas200m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var bancas300m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas300m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var bancas400m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas400m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var bancas500m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:bancas500m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var Nbancas100m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:nbancas100m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var Nbancas200m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:nbancas200m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var Nbancas300m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:nbancas300m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var Nbancas400m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:nbancas400m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });

        var Nbancas500m = L.tileLayer.wms(Project1_wms, {
            layers: 'Project1:nbancas500m',
            format: 'image/png',
            transparent: true,
            version: '1.1.1',
            attribution: "IVAN VENTURA"
        });


        ///// Grupo de Capas
        var overlays = {
            "mao": mao,
            "bancas": bancas,
            "escuelas": escuelas,
            "bancas100m": bancas100m,
            "bancas200m": bancas200m,
            "bancas300m": bancas300m,
            "bancas400m": bancas400m,
            "bancas500m": bancas500m,
            "Área de 100 M": Nbancas100m,
            "Área de 200 M": Nbancas200m,
            "Área de 300 M": Nbancas300m,
            "Área de 400 M": Nbancas400m,
            "Área de 500 M": Nbancas500m
        };



        map.addLayer(baseLayers.OpenStreetMap);
		map.setView(new L.LatLng(19.5489, -71.0569),14);
		L.control.layers(baseLayers, overlays).addTo(map);
		
		//Plugin magic goes here! Note that you cannot use the same layer object again, as that will confuse the two map controls
		var miniMap = new L.Control.MiniMap(baseLayersCopy.OpenStreetMap, { toggleDisplay: true }).addTo(map);
		
		map.on('baselayerchange', function (e) {
        miniMap.changeLayer(baseLayersCopy[e.name]);
        })

       
		

		///// Agrega el Control de Escala del Mapa
		L.control.scale().addTo(map);

		///// Agrega la Barra de Navegación
		L.control.navbar({ position: 'topleft' }).addTo(map);

		///// Agrega el Control de Gelocalización del Mapa
		L.control.locate().addTo(map);

		///// Agrega la Posición del Cursor en el Mapa
		L.control.mousePosition().addTo(map);

		///// Agrega la Función de Dibujar
		var drawnItems = new L.FeatureGroup();
		map.addLayer(drawnItems);

		///// Configura la Característica de Dibujo
		var drawControl = new L.Control.Draw({
			position: 'topleft',
			draw: {
				polygon: {
					shapeOptions: { color: 'purple' },
					allowIntersection: false,
					drawError: { color: 'orange', timeout: 1000 },
					showArea: true,
					metric: false,
					repeatMode: true
				},
				polyline: {
					shapeOptions: { color: 'red' },
				},
				rect: {
					shapeOptions: { color: 'green' },
				},
				circle: {
					shapeOptions: { color: 'steelblue' },
				},
				marker: true
			},
			edit: {
				featureGroup: drawnItems,
				remove: true
			}
		});

        map.addControl(drawControl);
		map.on('draw:created', function (e) {
			var type = e.layerType,
				layer = e.layer;
			drawnItems.addLayer(layer);
		});
        
    </script>

    //file:/C:/xxx.png
    </script>
    <script type="text/javascript">
        //Analytics

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-36489204-2']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga,s);
        })();
    </script>

</body>

</html>